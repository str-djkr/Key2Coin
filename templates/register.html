{% extends "base.html" %}

{% block title %}Register – Key2Coin{% endblock %}

{% block content %}
<div class="min-h-screen flex items-center justify-center px-4 relative overflow-hidden">
  <!-- Animated Background -->
  <div class="fixed inset-0 -z-10 overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-gray-900 via-purple-900 to-indigo-900 opacity-90"></div>
    <div class="absolute inset-0 animate-pulse">
      <div class="h-full w-full bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-10"></div>
    </div>
    <div class="absolute top-1/4 left-1/4 w-64 h-64 bg-purple-600/20 rounded-full blur-3xl animate-float"></div>
    <div class="absolute bottom-1/4 right-1/4 w-64 h-64 bg-indigo-600/20 rounded-full blur-3xl animate-float-delay"></div>
  </div>

  <!-- Registration Card -->
  <div class="w-full max-w-md relative">
    <!-- Glow Effect -->
    <div class="absolute -inset-4">
      <div class="w-full h-full rotate-3 bg-gradient-to-r from-indigo-600/30 to-purple-600/30 rounded-2xl blur-xl opacity-70"></div>
    </div>
    
    <div class="bg-gray-900/70 backdrop-blur-lg border border-gray-800/50 rounded-xl p-10 relative overflow-hidden shadow-2xl">
      <!-- Animated Circles -->
      <div class="absolute -top-20 -right-20 w-40 h-40 bg-indigo-500/10 rounded-full filter blur-xl"></div>
      <div class="absolute -bottom-20 -left-20 w-40 h-40 bg-purple-500/10 rounded-full filter blur-xl"></div>
      
      <!-- Logo -->
      <div class="flex justify-center mb-8">
        <div class="flex items-center space-x-2">
          <div class="w-10 h-10 bg-indigo-500 rounded-lg flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 text-white">
              <path d="M11.644 1.59a.75.75 0 01.712 0l9.75 5.25a.75.75 0 010 1.32l-9.75 5.25a.75.75 0 01-.712 0l-9.75-5.25a.75.75 0 010-1.32l9.75-5.25z" />
              <path d="M3.265 10.602l7.668 4.129a2.25 2.25 0 002.134 0l7.668-4.13 1.37.739a.75.75 0 010 1.32l-9.75 5.25a.75.75 0 01-.71 0l-9.75-5.25a.75.75 0 010-1.32l1.37-.738z" />
              <path d="M10.933 19.231l-7.668-4.13-1.37.739a.75.75 0 000 1.32l9.75 5.25c.221.12.489.12.71 0l9.75-5.25a.75.75 0 000-1.32l-1.37-.738-7.668 4.13a2.25 2.25 0 01-2.134-.001z" />
            </svg>
          </div>
          <h1 class="text-2xl font-bold bg-gradient-to-r from-indigo-400 to-purple-500 bg-clip-text text-transparent">Key2Coin</h1>
        </div>
      </div>

      <h2 class="text-3xl font-bold text-center mb-2 text-white">
        Create Your Account
      </h2>
      <p class="text-center text-gray-400 mb-8">
        Start earning crypto in just 1 minute
      </p>

      <!-- Error Messages -->
      {% if messages %}
      <div class="mb-6 space-y-2">
        {% for message in messages %}
        <div class="px-4 py-3 rounded-lg {% if message.tags == 'error' %}bg-red-900/50 text-red-300{% else %}bg-green-900/50 text-green-300{% endif %}">
          {{ message }}
        </div>
        {% endfor %}
      </div>
      {% endif %}

  <form method="POST" action="{% url 'register' %}">
        {% csrf_token %}
        
        <!-- Email Field -->
        <div>
          <label for="email" class="block text-sm font-medium text-gray-300 mb-2">Email</label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-gray-500">
                <path d="M3 4a2 2 0 00-2 2v1.161l8.441 4.221a1.25 1.25 0 001.118 0L19 7.162V6a2 2 0 00-2-2H3z" />
                <path d="M19 8.839l-7.77 3.885a2.75 2.75 0 01-2.46 0L1 8.839V14a2 2 0 002 2h14a2 2 0 002-2V8.839z" />
              </svg>
            </div>
            <input 
              type="email" 
              id="email" 
              name="email"
              placeholder="your@email.com" 
              class="w-full pl-10 pr-4 py-3 bg-gray-800/50 border {% if 'email' in errors %}border-red-500{% else %}border-gray-700/50{% endif %} rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition duration-300"
              required
              value="{{ request.POST.email|default:'' }}"
            >
          </div>
        </div>

        <!-- Password Field -->
        <div>
          <label for="password" class="block text-sm font-medium text-gray-300 mb-2">Password</label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-gray-500">
                <path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd" />
              </svg>
            </div>
            <input 
              type="password" 
              id="password" 
              name="password"
              placeholder="••••••••" 
              class="w-full pl-10 pr-4 py-3 bg-gray-800/50 border {% if 'password' in errors %}border-red-500{% else %}border-gray-700/50{% endif %} rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition duration-300"
              required
            >
          </div>
          <ul class="mt-2 text-xs text-gray-500">
            <li class="flex items-center {% if password_errors and 'length' not in password_errors %}text-green-400{% endif %}">
              <svg class="w-3 h-3 mr-1 {% if password_errors and 'length' in password_errors %}hidden{% endif %}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
              </svg>
              ≥ 8 characters
            </li>
            <li class="flex items-center {% if password_errors and 'uppercase' not in password_errors %}text-green-400{% endif %}">
              <svg class="w-3 h-3 mr-1 {% if password_errors and 'uppercase' in password_errors %}hidden{% endif %}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
              </svg>
              1 uppercase letter
            </li>
            <li class="flex items-center {% if password_errors and 'digit' not in password_errors %}text-green-400{% endif %}">
              <svg class="w-3 h-3 mr-1 {% if password_errors and 'digit' in password_errors %}hidden{% endif %}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
              </svg>
              1 number
            </li>
          </ul>
        </div>

        <!-- Submit Button -->
        <button 
          type="submit" 
          class="w-full relative overflow-hidden group"
          id="submitBtn"
        >
          <span class="absolute inset-0 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-lg opacity-100 group-hover:opacity-0 transition duration-300"></span>
          <span class="absolute inset-0 bg-gradient-to-r from-indigo-700 to-purple-700 rounded-lg opacity-0 group-hover:opacity-100 transition duration-300"></span>
          <span class="relative z-10 w-full flex items-center justify-center px-6 py-3.5 text-white font-medium rounded-lg transition duration-300">
            Create Account
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 ml-2 transform group-hover:translate-x-1 transition duration-200">
              <path fill-rule="evenodd" d="M3 10a.75.75 0 01.75-.75h10.638L10.23 5.29a.75.75 0 111.04-1.08l5.5 5.25a.75.75 0 010 1.08l-5.5 5.25a.75.75 0 11-1.04-1.08l4.158-3.96H3.75A.75.75 0 013 10z" clip-rule="evenodd" />
            </svg>
          </span>
        </button>

<!--        &lt;!&ndash; Divider &ndash;&gt;-->
<!--        <div class="relative">-->
<!--          <div class="absolute inset-0 flex items-center">-->
<!--            <div class="w-full border-t border-gray-800"></div>-->
<!--          </div>-->
<!--          <div class="relative flex justify-center text-sm">-->
<!--            <span class="px-2 bg-gray-900/70 text-gray-400">or continue with</span>-->
<!--          </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; Social Login &ndash;&gt;-->
<!--        <div class="grid grid-cols-2 gap-3">-->
<!--          <a href="#" class="flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-800/50 hover:bg-gray-800 rounded-lg transition duration-300">-->
<!--            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">-->
<!--              <path fill-rule="evenodd" d="M10 0C4.477 0 0 4.477 0 10c0 4.42 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.564 9.564 0 0110 4.844c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.933.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C17.14 18.163 20 14.418 20 10c0-5.523-4.477-10-10-10z" clip-rule="evenodd" />-->
<!--            </svg>-->
<!--            <span class="text-gray-300">GitHub</span>-->
<!--          </a>-->
<!--          <a href="#" class="flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-800/50 hover:bg-gray-800 rounded-lg transition duration-300">-->
<!--            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">-->
<!--              <path d="M6.29 18.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0020 3.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.073 4.073 0 01.8 7.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 010 16.407a11.616 11.616 0 006.29 1.84" />-->
<!--            </svg>-->
<!--            <span class="text-gray-300">Twitter</span>-->
<!--          </a>-->
<!--        </div>-->
     </form>

    </div>
  </div>
</div>

<script>
  // Dynamic password validation
  document.getElementById('password').addEventListener('input', function(e) {
    const password = e.target.value;
    const requirements = {
      length: password.length >= 8,
      uppercase: /[A-Z]/.test(password),
      digit: /[0-9]/.test(password)
    };
    
    // Update indicators
    document.querySelectorAll('ul.text-xs li').forEach((li, index) => {
      const requirement = Object.keys(requirements)[index];
      const icon = li.querySelector('svg');
      if (requirements[requirement]) {
        li.classList.add('text-green-400');
        icon?.classList.remove('hidden');
      } else {
        li.classList.remove('text-green-400');
        icon?.classList.add('hidden');
      }
    });
  });

  // Form submission handler
  document.querySelector('form').addEventListener('submit', function(e) {
    const submitBtn = document.getElementById('submitBtn');
    submitBtn.disabled = true;
    submitBtn.innerHTML = `
      <span class="relative z-10 w-full flex items-center justify-center px-6 py-3.5 text-white font-medium rounded-lg">
        <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        Creating account...
      </span>
    `;
  });
</script>

<style>
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
  }
  @keyframes float-delay {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(20px); }
  }
  .animate-float { animation: float 8s ease-in-out infinite; }
  .animate-float-delay { animation: float-delay 8s ease-in-out infinite 2s; }
</style>
{% endblock %}